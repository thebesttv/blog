#+title: æˆ‘çš„å°ç©æ„ä»¬

è®°å½•ä¸€ä¸‹æˆ‘éƒ½ä¹°äº†å“ªäº›å¥½ç©(æˆ–è¾£é¸¡)çš„ä¸œè¥¿ã€‚

#+begin_src elisp :exports results :results value drawer
  (setq tbt-gadgets '(("Bose QC35 ii (ä¸ºäº†é™ä½sbèˆå‹çš„å™ªå£°,ç»“æœæ•ˆæœå¹¶ä¸å¤ªå¥½)" 1067  2021 06 03)
                      ("NB æ˜¾ç¤ºå™¨æ”¯æ¶" 160.5 2021 05 12)
                      ("XBox Series S æ‰‹æŸ„" 577 2021 02 14)
                      ("è‡´é’› 1T SSD" 698 2021 01 01)
                      ("åšçš“å†²ç‰™å™¨F17 (åƒåœ¾ç©æ„,ä¸åˆ°åŠå¹´åäº†å¥½å‡ æ¬¡)" 226.53 2020 12 14)
                      ("æ–‡çŸ³ Note 3" 3531.98 2020 10 21)
                      ("éŸ¶éŸ³ AS600 éª¨ä¼ å¯¼è€³æœº" 388 2020 07 25)
                      ("è‹±ç¿è¾¾ 500G SSD" 389 2020 06 24)
                      ("MOFTç”µè„‘æ”¯æ¶ (çœŸçš„æ–¹ä¾¿åˆå¥½ç”¨,å¹çˆ†ğŸ¥°)" 98 2019 10 10)
                      ("å°ç±³æ‰‹ç¯4" 168.98 2019 10 06)
                      ("Redmi Note 8 Pro" 1799 2019 10 02)
                      ("å‡‰é‹" 178 2019 09 23)))

  (defun get-elapsed-day (year month day)
    (/
     (-
      (time-convert (current-time) 'integer) ; current time in seconds
      (time-convert (encode-time             ; given time in seconds
                     (make-decoded-time :second 0
                                        :minute 0
                                        :hour   0
                                        :day    day
                                        :month  month
                                        :year   year
                                        :zone   28800))
                    'integer))
     (* 24.0 3600)))                         ; seconds a day

  (let (result)
    (dolist (gadget tbt-gadgets result)
      (let ((name  (cl-first gadget))
            (price (cl-second gadget))
            (year  (cl-third gadget))
            (month (cl-fourth gadget))
            (day   (cl-fifth  gadget)))
        (setq result
              (concat result
                      (format "- %s, %04d-%02d-%02d, å…± %.2f, å¹³å‡æ¯å¤© %.2f\n"
                              name year month day price
                              (/ price (get-elapsed-day year month day))))))))
#+end_src
